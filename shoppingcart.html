<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="shortcut icon" href="Glace_logo.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="shopingcart.css">
    <script src="app.js" async></script>
    <title>Order | </title>
</head>
<body>

    
    <header>
        <h1>Pick Your Item</h1>
    </header>
    <section class="contenedor">
        <!-- Contenedor de elementos -->
        <div class="contenedor-items">
            <div class="item">
                <span class="titulo-item">Vanilla Ice Cream</span>
                <img src="images/menu1.png" alt="" class="img-item">
                <span class="precio-item">8.000</span>
                <button class="boton-item">Add</button>
            </div>
            <div class="item">
                <span class="titulo-item">Strawberry Ice Cream</span>
                <img src="images/menu2.png" alt="" class="img-item">
                <span class="precio-item">8.000</span>
                <button class="boton-item">Add</button>
            </div>
            <div class="item">
                <span class="titulo-item">Chocolate Ice Cream</span>
                <img src="images/menu3.png" alt="" class="img-item">
                <span class="precio-item">8.000</span>
                <button class="boton-item">Add</button>
            </div>
            <div class="item">
                <span class="titulo-item">Greentea Ice Cream</span>
                <img src="images/EsKrimMatcha.png" alt="" class="img-item">
                <style> </style>
                <span class="precio-item">8.000</span>
                <button class="boton-item">Add</button>
            </div>
            <div class="item">
                <span class="titulo-item">Lemon Tea</span>
                <img src="images/lemontea.png" alt="" class="img-item">
                <span class="precio-item">15.000</span>
                <button class="boton-item">Add</button>
            </div>
            <div class="item">
                <span class="titulo-item">Milkshake Chocolate</span>
                <img src="images/Milkshake_Coklat.png" alt="" class="img-item">
                <span class="precio-item">15.000</span>
                <button class="boton-item">Add</button>
            </div>
            <div class="item">
                <span class="titulo-item">Milkshake Strawberry</span>
                <img src="images/Milkshake_Strawberry.png" alt="" class="img-item">
                <span class="precio-item">15.000</span>
                <button class="boton-item">Add</button>
            </div>
            <div class="item">
                <span class="titulo-item">Milkshake Vanilla</span>
                <img src="images/Milkshake_Vanilla.png" alt="" class="img-item">
                <span class="precio-item">15.000</span>
                <button class="boton-item">Add</button>
            </div>
            
        </div>
        <!-- Carrito de Compras -->
        <div class="carrito" id="carrito">
            <div class="header-carrito">
                <h2>Shopping Cart</h2>
            </div>

            <div class="carrito-items">
                <!-- 
                <div class="carrito-item">
                    <img src="img/boxengasse.png" width="80px" alt="">
                    <div class="carrito-item-detalles">
                        <span class="carrito-item-titulo">Box Engasse</span>
                        <div class="selector-cantidad">
                            <i class="fa-solid fa-minus restar-cantidad"></i>
                            <input type="text" value="1" class="carrito-item-cantidad" disabled>
                            <i class="fa-solid fa-plus sumar-cantidad"></i>
                        </div>
                        <span class="carrito-item-precio">$15.000,00</span>
                    </div>
                   <span class="btn-eliminar">
                        <i class="fa-solid fa-trash"></i>
                   </span>
                </div>
                <div class="carrito-item">
                    <img src="img/skinglam.png" width="80px" alt="">
                    <div class="carrito-item-detalles">
                        <span class="carrito-item-titulo">Skin Glam</span>
                        <div class="selector-cantidad">
                            <i class="fa-solid fa-minus restar-cantidad"></i>
                            <input type="text" value="3" class="carrito-item-cantidad" disabled>
                            <i class="fa-solid fa-plus sumar-cantidad"></i>
                        </div>
                        <span class="carrito-item-precio">$18.000,00</span>
                    </div>
                   <button class="btn-eliminar">
                        <i class="fa-solid fa-trash"></i>
                   </button>
                </div>
                 -->
            </div>
            <form action="cart.php" method="post">
            <div class="carrito-total">
                <div class="fila">
                    <strong>Total</strong>
                    <span class="carrito-precio-total">
                        Rp.120.000,00
                    </span>
                </div>
                <button type="submit" class="btn-pagar" value="Submit">Checkout <i class="fa-solid fa-bag-shopping"></i> </button>
                <script>
                    document.querySelector('.btn-pagar').addEventListener('click', () => {
                        const cartItems = document.querySelectorAll('.carrito-item-detalles');
                        const cartData = [];
                
                        cartItems.forEach(item => {
                            const itemName = item.querySelector('.carrito-item-titulo').textContent;
                            const itemPrice = item.querySelector('.carrito-item-precio').textContent;
                            const itemQuantity = parseInt(item.querySelector('.carrito-item-cantidad').value);
                
                            cartData.push({
                                item_name: itemName,
                                item_price: itemPrice,
                                item_quantity: itemQuantity // Include the quantity in the cart data
                            });
                        });
                
                        // Send cartData to the server using fetch API
                        fetch('cart.php', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/x-www-form-urlencoded'
                            },
                            body: 'cart_items=' + JSON.stringify(cartData)
                        }).then(response => {
                            // Handle the response from the server if needed
                            // Redirect to the payment page after the server has processed the data
                            window.location.href = "pembayaran.html";
                        }).catch(error => {
                            console.error('Error:', error);
                        });
                    });
                </script>
            </div>
            </form>
        </div>
    </section>
</body>
</html>